#!/usr/bin/perl

# CLI Pipe Viewer 0.4.4 - configuration file

use utf8;

our $CONFIG = {
  api_host                      => "auto",
  audio_quality                 => "best",
  auto_captions                 => 1,
  autoplay_mode                 => 0,
  bypass_age_gate_native        => 0,
  bypass_age_gate_with_proxy    => 1,
  cache_dir                     => "/tmp/pipe-viewer",
  colors                        => 1,
  comments_order                => "top",
  confirm                       => 0,
  convert_cmd                   => "/usr/bin/ffmpeg -i *IN* *OUT*",
  convert_to                    => undef,
  cookie_file                   => undef,
  copy_caption                  => 0,
  custom_channel_layout_format  => [
                                     { align => "right", color => "bold", text => "*NO*.", width => 3 },
                                     { align => "left", color => "bold blue", text => "*AUTHOR*", width => "55%" },
                                     { align => "right", color => "green", text => "*VIDEOS* videos", width => 14 },
                                     {
                                       align => "right",
                                       color => "green",
                                       text  => "*SUBS_SHORT* subs",
                                       width => 10,
                                     },
                                   ],
  custom_layout_format          => [
                                     { align => "right", color => "bold", text => "*NO*.", width => 3 },
                                     { align => "left", color => "bold blue", text => "*TITLE*", width => "55%" },
                                     { align => "left", color => "magenta", text => "*AUTHOR*", width => "15%" },
                                     { align => "right", color => "green", text => "*AGE_SHORT*", width => 3 },
                                     { align => "right", color => "green", text => "*VIEWS_SHORT*", width => 5 },
                                     { align => "right", color => "blue", text => "*TIME*", width => 8 },
                                   ],
  custom_playlist_layout_format => [
                                     { align => "right", color => "bold", text => "*NO*.", width => 3 },
                                     { align => "left", color => "bold blue", text => "*TITLE*", width => "55%" },
                                     { align => "right", color => "green", text => "*ITEMS* videos", width => 14 },
                                     { align => "left", color => "magenta", text => "*AUTHOR*", width => "20%" },
                                   ],
  dash                          => 1,
  date                          => undef,
  debug                         => 0,
  download_and_play             => 0,
  download_with_wget            => 1,
  download_with_ytdl            => 1,
  downloads_dir                 => ".",
  env_proxy                     => 1,
  fat32safe                     => 1,
  features                      => [],
  ffmpeg_cmd                    => "/usr/bin/ffmpeg",
  force_fallback                => 0,
  fullscreen                    => 1,
  get_captions                  => 1,
  get_subscriptions_in_parallel => 1,
  get_term_width                => 1,
  hfr                           => 1,
  highlight_color               => "bold",
  highlight_watched             => 1,
  history                       => 1,
  history_file                  => "$ENV{HOME}/.config/youtube-viewer/cli-history.txt",
  history_limit                 => 0,
  http_proxy                    => undef,
  ignore_av1                    => 1,
  ignored_projections           => ["mesh", "equirectangular"],
  interactive                   => 1,
  keep_original_video           => 0,
  local_playlist_limit          => -1,
  maxResults                    => 20,
  merge_into_mkv                => 1,
  merge_into_mkv_args           => "-loglevel warning -c:s srt -c:v copy -c:a copy -disposition:s forced",
  merge_with_captions           => 1,
  order                         => undef,
  page                          => 1,
  prefer_av1                    => 0,
  prefer_invidious              => 0,
  prefer_m4a                    => 0,
  prefer_mp4                    => 1,
  region                        => undef,
  remove_played_file            => 0,
  resolution                    => "1080p",
  saved_channels_file           => "$ENV{HOME}/.config/youtube-viewer/youtube_users.txt",
  show_video_info               => 1,
  skip_if_exists                => 1,
  skip_watched                  => 0,
  split_videos                  => 1,
  srt_languages                 => ["ro", "en"],
  subscribed_channels_file      => "$ENV{HOME}/.config/pipe-viewer/subscribed_channels.txt",
  subscriptions_lifetime        => 600,
  subscriptions_limit           => 10000,
  thousand_separator            => ",",
  timeout                       => undef,
  user_agent                    => undef,
  video_filename_format         => "*FTITLE* - *ID*.*FORMAT*",
  video_player_selected         => "mpv",
  video_players                 => {
                                     ffmpeg => {
                                       arg => "",
                                       cmd => "ffmpeg -i *VIDEO* -i *AUDIO* -c:v copy -c:a copy -f matroska - | ffplay -",
                                       fs => "-fs",
                                       novideo => "-vn",
                                       srt => "-vf subtitles=filename=*SUB*",
                                     },
                                     ffplay => {
                                       arg => "-loglevel quiet -fast -autoexit -window_title *TITLE* -i *VIDEO*",
                                       cmd => "ffplay",
                                       fs => "-fs",
                                       novideo => "-vn",
                                       srt => "-vf subtitles=filename=*SUB*",
                                     },
                                     mp4dl480 => {
                                       arg => "--merge-output-format=mkv --write-auto-sub --embed-subs --sub-lang=ro,ron,rom --convert-subs srt -f 'webm[height=480]+bestaudio[ext=webm]/best[ext=webm]/best' *URL*",
                                       cmd => "yt-dlp",
                                     },
                                     mpv => {
                                       arg => "--really-quiet --force-media-title=*TITLE* --no-ytdl *VIDEO*\\&v=*ID*",
                                       audio => "--audio-file=*AUDIO*",
                                       cmd => "/usr/bin/mpv",
                                       fs => "--fullscreen",
                                       novideo => "--no-video",
                                       srt => "--sub-file=*SUB*",
                                     },
                                     mpv_native => {
                                       arg => "--really-quiet --force-media-title=*TITLE* *URL*",
                                       cmd => "/usr/bin/mpv",
                                       fs => "--fullscreen",
                                       novideo => "--no-video",
                                       srt => "--sub-file=*SUB*",
                                     },
                                     vlc => {
                                       arg => "--quiet --play-and-exit --no-video-title-show --input-title-format=*TITLE* *VIDEO*",
                                       audio => "--input-slave=*AUDIO*",
                                       cmd => "vlc",
                                       fs => "--fullscreen",
                                       novideo => "--intf=dummy --novideo",
                                       srt => "--sub-file=*SUB*",
                                     },
                                   },
  videoDuration                 => undef,
  watch_history                 => 1,
  watch_history_file            => "$ENV{HOME}/.config/youtube-viewer/playlists/watched_videos.txt",
  wget_cmd                      => "/usr/bin/wget --no-proxy",
  youtube_channel_url           => "https://www.youtube.com/channel/%s",
  youtube_playlist_url          => "https://www.youtube.com/playlist?list=%s",
  youtube_video_url             => "https://yewtu.be/watch?v=%s",
  ytdl                          => 1,
  ytdl_cmd                      => "/usr/bin/yt-dlp",
  ytdlp_comments                => 0,
  ytdlp_max_comments            => 10,
  ytdlp_max_replies             => 3,
}
